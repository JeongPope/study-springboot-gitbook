---
description: 도메인 주도 설계
---

# WEEK 8

**도메인 주도 설계**

* 복잡한 소프트웨어 시스템을 개발할 때 도메인 모델을 중심으로 설계하는 방법론
  * 도메인은 소프트웨어가 해결하고자 하는 문제 영역
  * 도메인 모델은 해당 도메인의 핵심 개념, 규칙, 관계를 표현한 것
* DDD에서는 도메인 전문가와 개발자 간의 긴밀한 협업을 통해 도메인을 깊이 있게 이해하고, 도메인 모델을 구현하는 것을 목표로 합니다.
* 도메인 모델을 기반으로 한 아키텍처 설계, 전술적 설계 패턴(예: Aggregate, Entity, Value Object 등), 언어 중심적 개발(Ubiquitous Language) 등의 기법을 활용합니다.
* DDD를 적용하면 도메인 지식을 소프트웨어에 반영하고, 유지보수성과 확장성이 높은 시스템을 구축할 수 있습니다.



**전략적 설계, Strategic Design**

* 시스템 전체 수준에서 도메인 모델을 구조화하고 경계를 정의하는 과정
* 전략적 설계의 목표는 도메인을 기능적으로 분해하고, 각 하위 도메인 간의 관계와 상호작용을 명확히 하는 것
* 시스템을 보다 관리 가능한 단위로 나누고, 팀 간의 협업을 원활하게 하며, 시스템의 유연성과 확장성을 높일 수 있다.
* 전략적 설계의 주요 요소로는 보편 언어, 제한된 컨텍스트, 상황 맵(Context Map) 등이 있습니다.

**보편언어 (Ubiqutious Language)**

* 특정 도메인 내에서 도메인 전문가와 개발팀이 동일한 용어와 개념을 사용하여 소통하는 것을 의미
* 도메인 전문가와 개발자 간의 의사소통 격차를 줄이고, 도메인에 대한 이해를 공유하기 위해 사용
* 도메인 모델에 직접 반영되어야 하며, 코드와 문서, 대화에서 일관되게 사용되어야 한다.
* 보편 언어를 사용함으로써 도메인에 대한 이해도를 높이고, 모호성을 제거하며, 개발팀과 도메인 전문가 간의 협업을 강화할 수 있다.

**제한된 컨텍스트 (Bounded Context)**

* 특정 도메인 모델이 적용되는 명시적인 경계를 나타낸다.
* 각 제한된 컨텍스트 내에서는 해당 도메인에 맞는 독자적인 모델과 개념, 용어가 사용된다.
* 서로 다른 제한된 컨텍스트는 명확한 경계를 가지며, 경계를 넘나드는 통신은 잘 정의된 인터페이스를 통해 이루어질 수 있다.
* 제한된 컨텍스트를 사용하면 도메인 모델의 복잡성을 관리하고, 팀 간의 의존성을 최소화하며, 변경의 영향 범위를 제한할 수 있다.

**하위 도메인 (Subdomain)**

* 전체 도메인을 기능적으로 분해한 각 부분을 나타낸다.
* 각 하위 도메인은 고유한 문제 영역, 비즈니스 규칙, 데이터 모델을 가지고 있다.
* 하위 도메인은 다음과 같이 분류될 수 있습니다.
  * 코어 도메인: 비즈니스의 핵심 경쟁력을 나타내는 하위 도메인
  * 지원 도메인: 코어 도메인을 뒷받침하는 하위 도메인
  * 일반 도메인: 비즈니스에 특화되지 않은 일반적인 문제를 다루는 하위 도메인
* 각 하위 도메인은 별도의 제한된 컨텍스트로 구현되는 것이 일반적이며, 이를 통해 도메인 모델의 모듈화와 관심사 분리를 달성할 수 있다.



**전술적 설계, Tactical Design**

* **전략적 설계를 기반**으로 실제 코드 수준에서 도메인 모델을 구현하는 과정
* 도메인 모델을 객체 지향 프로그래밍(OOP) 관점에서 설계하고 구현하는 데 초점
* 주요 요소로는 엔티티(Entity), 값 객체(Value Object), 애그리거트(Aggregate), 리포지토리(Repository), 도메인 서비스(Domain Service) 등이 있습니다.

**엔티티 (Entity) vs 일반적으로 이야기하는 개체 (Entity)**

* DDD에서의 엔티티(Entity)
  * 고유한 식별자를 가지며, 시간이 지나도 식별자는 변하지 않습니다.
  * 엔티티의 속성은 변경될 수 있지만, 식별자를 기준으로 동일한 엔티티로 구분된다.
  * 엔티티는 도메인의 핵심 개념 중 고유한 식별자를 가지고 지속적으로 추적되어야 하는 객체를 나타냅니다.
  * ex) 이커머스 도메인에서 '주문'은 주문번호를 식별자로 갖는 엔티티가 될 수 있다.
* 일반적인 개체(Entity)
  * 일반적으로 '개체'는 현실 세계에 존재하는 사물, 사람, 개념 등을 나타내는 용어로 사용
  * 개체는 고유한 식별자를 가질 수도 있고, 가지지 않을 수도 있습니다.
  * 개체는 속성과 행위를 가지며, 다른 개체와 관계를 맺을 수 있습니다.
  * 일반적인 의미의 개체는 DDD의 엔티티, 값 객체, 애그리거트 등 다양한 형태로 구현될 수 있습니다.

**값 객체 (Value Object, VO)**

* 도메인에서 개념적으로 하나의 값을 나타내며, 복사해도 동일한 것으로 간주된다.
* 예를 들어, 주소, 금액, 색상 등은 값 객체로 모델링될 수 있다.
* 불변성을 유지해야 하므로, 생성 시점에 필요한 모든 속성을 설정하고 이후에는 변경되지 않아야 한다.
* 값 객체는 코드의 의도를 명확히 하고, 불변성으로 인해 안전하게 공유될 수 있어 코드의 안정성을 높인다.

**집합체 (Aggregate)**

* 도메인 객체 간의 일관성과 무결성을 유지하기 위해 함께 처리되어야 하는 객체 그룹
* 집합체는 루트 엔티티와 그에 속한 엔티티 및 값 객체로 구성된다.
* 집합체 루트는 집합체 내의 일관성과 무결성을 유지할 책임을 가지며, 집합체 외부에서는 루트를 통해서만 집합체 내부 객체에 접근할 수 있다.
* 도메인 규칙에 따라 경계를 설정하며, 집합체 내의 객체는 함께 생성, 수정, 삭제된다.
* 집합체를 사용하면 도메인 모델의 복잡성을 관리하고, 일관성 있는 상태 변경을 보장할 수 있다.

**리파지터리 (Repository)**

* 도메인 객체의 지속성을 추상화한 객체
* 도메인 객체의 저장, 조회, 삭제 등의 작업을 수행하며, 도메인 객체와 영속성 메커니즘 사이의 중개자 역할을 한다.
* 도메인 객체를 영속화하는 기술적인 세부 사항을 캡슐화하여, 도메인 모델의 순수성을 유지한다.
* 도메인 객체의 컬렉션처럼 동작하며, 도메인 용어를 사용하여 메서드를 정의한다.
* 리포지토리를 사용하면 도메인 모델과 영속성 구현을 분리할 수 있어, 코드의 가독성과 유지보수성을 높일 수 있다.

**도메인 서비스 (Domain Service)**

* 도메인 서비스는 도메인 모델에 속하지만, 특정 엔티티나 값 객체에 포함되기 어려운 도메인 로직을 구현한 객체
* 도메인 개념을 기반으로 동작하며, 여러 엔티티나 값 객체를 조합하여 도메인 로직을 수행한다.
* 도메인 서비스는 상태를 가지지 않고, 주로 입력을 받아 출력을 반환하는 함수적 성격을 갖는다.
* 예를 들어, 주문 도메인에서 '총 주문 금액 계산'은 도메인 서비스로 구현될 수 있다.
* 도메인 서비스를 사용하면 도메인 로직을 명확히 표현하고, 도메인 모델의 응집력을 높일 수 있다.
